(this["webpackJsonpgift-list"]=this["webpackJsonpgift-list"]||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(25),r=a.n(l),s=a(21),i=a(30),o=(a(69),a(70),a(6)),m=a(9),u=a(10),d=function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getUserId",value:function(){var e=this.getToken();if(!e)return!1;var t=e.split(".");return JSON.parse(atob(t[1])).sub}},{key:"isAuthorized",value:function(){return this.getToken()}}]),e}(),E=function(){return c.a.createElement("div",{className:"logo"},c.a.createElement("div",{className:"present square"},c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"})),c.a.createElement("div",{className:"present tall"},c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"})),c.a.createElement("div",{className:"present wide"},c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"}),c.a.createElement("div",{className:"logo-box"})))},v=function(e){var t=Object(i.g)(),a=Object(n.useState)({isOpen:!1}),l=Object(o.a)(a,2),r=l[0],m=l[1],u=function(){m({isOpen:!r.isOpen})};return c.a.createElement("div",{className:"navbar"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement(s.b,{className:"navbar-item",to:"/",onClick:function(){return m({isOpen:!1})}},c.a.createElement(E,null),c.a.createElement("em",{className:"logo-text"},"GiftList")),c.a.createElement("a",{role:"button",className:"navbar-burger burger ".concat(r.isOpen?"is-active":""),onClick:function(){return u()},"aria-label":"menu","aria-expanded":"false"},c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}))),c.a.createElement("div",{className:"navbar-menu ".concat(r.isOpen?"is-active":""," ").concat("/"===t.location.pathname?"navbar-is-transparent":"navbar-is-off-white")},c.a.createElement("div",{className:"navbar-end"},d.isAuthorized()&&c.a.createElement("div",{className:"navbar-item"},c.a.createElement(s.b,{className:"navbar-item",to:"/lists/create",onClick:function(){return u()}},"Create new list")),!d.isAuthorized()&&c.a.createElement("div",{className:"navbar-item"},c.a.createElement(s.b,{className:"navbar-item",to:"/register",onClick:function(){return u()}},"Register")),!d.isAuthorized()&&c.a.createElement("div",{className:"navbar-item"},c.a.createElement(s.b,{className:"navbar-item",to:"/login",onClick:function(){return u()}},"Login")),d.isAuthorized()&&c.a.createElement("div",{className:"navbar-item"},c.a.createElement(s.b,{className:"navbar-item",to:"/lists/".concat(d.getUserId()),onClick:function(){return u()}},"My Lists")),d.isAuthorized()&&c.a.createElement("div",{className:"navbar-item"},c.a.createElement(s.b,{className:"navbar-item",onClick:function(){return d.logout(),void t.push("/")}},"Logout")))))},f=a(20),h=a(7),p=a.n(h),b=["Accessories","Art","Glass","Jewelry","Candles","Furniture"],g=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([]),s=Object(o.a)(r,2),i=s[0],m=s[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),E=d[0],v=d[1],h=Math.floor(6*Math.random()),g=b[h],N=function(e){var t=[];e.forEach((function(e,a){p.a.get("/api/image/".concat(e)).then((function(e){(t=Object(f.a)(t))[a]=e.data.image,m(t)})).catch((function(e){return console.log(e)}))}))};return Object(n.useEffect)((function(){var e=[],t=[];v(g),p.a.get("/api/etsy/".concat(g)).then((function(t){e=[t.data.data[0],t.data.data[1],t.data.data[2],t.data.data[3]],l(e)})).then((function(){t=e.map((function(e,t){return e.listing_id}))})).then((function(){N(t)}))}),[]),console.log(a),a===[]?c.a.createElement("div",null,"Loading"):c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"title has-text-centered"},"Currently trending in ",E),c.a.createElement("div",{className:"columns"},a.map((function(e,t){return c.a.createElement("div",{key:t,className:"column column-home"},c.a.createElement("div",{className:"card-home"},c.a.createElement("div",{className:"card-image"},c.a.createElement("figure",{className:"image is-3by2"},c.a.createElement("img",{src:i[t],alt:"Product"}))),c.a.createElement("div",{className:"card-content"},c.a.createElement("p",null,e.title.substring(0,40),"..."))))})))))},N=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"hero is-medium has-text-centered"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"GiftList"),c.a.createElement("h2",{className:"title"},"For all your gift buying fun!")))),c.a.createElement(g,null))},O=a(2),j=a(17),y=a(11),k=a(12),C=a(13),S=function(){var e=d.getUserId(),t=[{urlStub:"lists",label:"My Lists",path:"/lists/".concat(e)},{urlStub:"create",label:"Create A List",path:"/lists/create"}],a=Object(i.g)().location.pathname.split("/").map((function(e,a){return t.find((function(t){return t.urlStub===e}))})).filter((function(e){return void 0!==e}));return t?c.a.createElement("div",{className:"breadcrumbs-container"},c.a.createElement("ul",{className:"breadcrumbs"},c.a.createElement("li",null,c.a.createElement(s.b,{to:"/"},"Home")),a.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement(s.b,{to:e.path},e.label))})))):c.a.createElement("div",null,"Loading")},I=function(){return c.a.createElement("div",{className:"column is-half mobile-hide"},c.a.createElement("div",{className:"note-card"},c.a.createElement("p",null,"Create a GiftList"),c.a.createElement("p",null,"for a friend")),c.a.createElement("div",{className:"note-card"},c.a.createElement("p",null,"Create a GiftList"),c.a.createElement("p",null,"for your family")),c.a.createElement("div",{className:"note-card"},c.a.createElement("p",null,"Create a GiftList"),c.a.createElement("p",null,"just for you!")))},w=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(y.a)(this,Object(k.a)(t).call(this))).state={data:{firstname:"",surname:"",email:"",password:"",passwordConfirmation:""},errors:{}},e}return Object(C.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=Object(j.a)({},this.state.data,Object(O.a)({},e.target.name,e.target.value)),a=Object(j.a)({},this.state.errors,Object(O.a)({},e.target.name,""));this.setState({data:t,errors:a})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),p.a.post("/api/register",this.state.data).then((function(){return t.props.history.push("/login")})).catch((function(e){return t.setState({errors:e.response.data.errors})}))}},{key:"render",value:function(){var e=this;return console.log(this.state.errors),c.a.createElement(c.a.Fragment,null,c.a.createElement(S,null),c.a.createElement("div",{className:""},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Register"),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-half"},c.a.createElement("form",{className:"form",onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"firstname",className:"label"},"First name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"text",name:"firstname"})),this.state.errors.firstname&&c.a.createElement("small",{className:"help is-danger"},this.state.errors.firstname)),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"surname",className:"label"},"Surname"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"text",name:"surname"})),this.state.errors.surname&&c.a.createElement("small",{className:"help is-danger"},this.state.errors.surname)),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"email",className:"label"},"Email"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"email",name:"email"})),this.state.errors.email&&c.a.createElement("small",{className:"help is-danger"},this.state.errors.email)),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"password",className:"label"},"Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"password",name:"password"})),this.state.errors.password&&c.a.createElement("small",{className:"help is-danger"},this.state.errors.password)),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"",className:"label"},"Confirm Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"password",name:"passwordConfirmation"})),this.state.errors.passwordConfirmation&&c.a.createElement("small",{className:"help is-danger"},this.state.errors.passwordConfirmation)),c.a.createElement("button",{className:"button is-rounded"},"Register"))),c.a.createElement(I,null)))))}}]),t}(c.a.Component),x=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(y.a)(this,Object(k.a)(t).call(this))).state={data:{email:"",password:""},errors:""},e}return Object(C.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=Object(j.a)({},this.state.data,Object(O.a)({},e.target.name,e.target.value));this.setState({data:t,errors:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),p.a.post("/api/login",this.state.data).then((function(e){d.setToken(e.data.token),console.log(e),t.props.history.push("/lists/".concat(e.data.id))})).catch((function(){return t.setState({errors:"Incorrect username/password combination"})}))}},{key:"render",value:function(){var e=this;return console.log(this.state.errors),c.a.createElement(c.a.Fragment,null,c.a.createElement(S,null),c.a.createElement("div",{className:""},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-half"},c.a.createElement("h1",null,"Login"),c.a.createElement("form",{className:"form",onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"email",className:"label"},"Email"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"email",name:"email"}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"password",className:"label"},"Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"input",type:"password",name:"password"}))),this.state.errors&&c.a.createElement("small",{className:"help is-danger"},this.state.errors),c.a.createElement("button",{className:"button is-rounded"},"Login"))),c.a.createElement("div",{className:"columns is-half"},c.a.createElement(I,null))))))}}]),t}(c.a.Component),D=a(32),F=a.n(D),A=a(18),R=a(19),_=function(e){var t=Object(i.g)(),a=Object(n.useState)({}),l=Object(o.a)(a,2),r=(l[0],l[1]),s=d.getUserId(),m=c.a.createElement(A.a,{icon:R.d}),u=function(e){t.push("/lists/".concat(e.user._id,"/").concat(e._id))};return void 0===e.data?c.a.createElement("div",null,"loading"):c.a.createElement(c.a.Fragment,null,e.data.map((function(t,a){return c.a.createElement(c.a.Fragment,null,"Active"===t.listStatus&&c.a.createElement("div",{className:"container list-container",key:a},c.a.createElement("span",{className:"clickable interactive-icon",onClick:function(a){return function(t,a){t.preventDefault(),p.a.put("/api/lists/".concat(s,"/").concat(a),{listStatus:"Archived"},{headers:{Authorization:"Bearer ".concat(d.getToken())}}).then((function(){e.refreshFunction(),r("Archived")})).catch((function(e){return console.log(e)}))}(a,t._id)}},m),c.a.createElement("div",{className:"lists",onClick:function(){return u(t)}},c.a.createElement("div",{className:"list-col"},c.a.createElement("p",null,c.a.createElement("strong",null,t.listName)),t.eventDate&&c.a.createElement("p",null,F()(t.eventDate).format("DD-MM-YYYY"))),c.a.createElement("div",{className:"list-col",onClick:function(){return u(t)}},c.a.createElement("p",null,"Number of gifts saved: ",t.itemsSaved.length+t.customItem.length)))))})))},L=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)([]),E=Object(o.a)(d,2),v=(E[0],E[1]),f=function(){var t=e.match.params.userId;p.a.get("/api/lists/".concat(t)).then((function(e){return u(e.data)})).catch((function(e){return v(e)}))};return Object(n.useEffect)(f,[]),Object(n.useEffect)((function(){var t=e.match.params.userId;p.a.get("/api/user/".concat(t)).then((function(e){r(e.data)})).catch((function(e){return v(e)}))}),[]),m===[]||l==={}?c.a.createElement("div",null,"Loading"):c.a.createElement(c.a.Fragment,null,c.a.createElement(S,null),c.a.createElement("section",{className:""},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Welcome back, ",l.firstname),c.a.createElement("p",null,"You are currently working on ",function(){var e=m.filter((function(e,t){return"Active"===e.listStatus}));return console.log(e.length),e.length}()," lists"))),c.a.createElement("section",{className:"list-map"},c.a.createElement("div",{className:"container"},c.a.createElement(_,{data:m,refreshFunction:f}))))},Y=function(e){var t=c.a.createElement(A.a,{icon:R.b}),a=Object(n.useState)({}),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(),m=Object(o.a)(i,2),u=m[0],E=m[1],v=Object(n.useState)(!1),f=Object(o.a)(v,2),h=f[0],b=f[1];function g(e){e!==h&&b(e)}var N=function(e){E(Object(j.a)({},u,Object(O.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){s(e),E(e)}),[e]),c.a.createElement("div",{id:"list-name"},c.a.createElement("div",{className:"element ".concat(h?"hide":"show")},c.a.createElement("h1",null,c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(){g(!0)}},t),r.listName),c.a.createElement("h3",null,"for ",r.giftRecipient)),c.a.createElement("form",{className:"form ".concat(h?"show":"hide")},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"listName",className:"label"},"Your list name"),c.a.createElement("div",{className:"control"},r.listName&&c.a.createElement("input",{className:"input",type:"text",name:"listName",defaultValue:r.listName,onChange:function(e){return N(e)}}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"giftRecipient",className:"label"},"Who your list is for"),c.a.createElement("div",{className:"control"},r.giftRecipient&&c.a.createElement("input",{className:"input",type:"text",defaultValue:r.giftRecipient,name:"giftRecipient",onChange:function(e){return N(e)}}))),c.a.createElement("button",{className:"button save is-rounded",onClick:function(t){return function(t){t.preventDefault(),p.a.put("/api/lists/".concat(e.userId,"/").concat(e.listId),u,{headers:{Authorization:"Bearer ".concat(d.getToken())}}).catch((function(e){return console.log(e)})),s(u),g(!1)}(t)}},"Save changes"),c.a.createElement("button",{className:"button cancel is-rounded",onClick:function(e){return function(e){e.preventDefault(),g(!1)}(e)}},"Cancel changes")))},z=function(e){var t=c.a.createElement(A.a,{icon:R.b}),a=Object(n.useState)({}),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(),m=Object(o.a)(i,2),u=m[0],E=m[1],v=Object(n.useState)(!1),f=Object(o.a)(v,2),h=f[0],b=f[1];function g(e){e!==h&&b(e)}var N=function(e){E(Object(j.a)({},u,Object(O.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){s(e),E(e)}),[e]),console.log("remind",r.eventReminder),c.a.createElement("div",{id:"list-event"},c.a.createElement("div",{className:"element ".concat(h?"hide":"show")},r.eventName&&c.a.createElement("h2",null,c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(){g(!0)}},t),r.eventName),r.eventDate&&c.a.createElement("p",null,"on ",F()(r.eventDate).format("DD-MM-YYYY"))),c.a.createElement("form",{className:"form ".concat(h?"show":"hide")},r.eventName&&c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"eventName",className:"label"},"Your event name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",type:"text",name:"eventName",defaultValue:r.eventName,onChange:function(e){return N(e)}}))),r.eventDate&&c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"eventDate",className:"label"},"Your event date"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input",type:"date",defaultValue:F()(r.eventDate).format("YYYY-MM-DD"),name:"eventDate",onChange:function(e){return N(e)}}))),c.a.createElement("button",{className:"button save is-rounded",onClick:function(t){return function(t){t.preventDefault(),p.a.put("/api/lists/".concat(e.userId,"/").concat(e.listId),u,{headers:{Authorization:"Bearer ".concat(d.getToken())}}).catch((function(e){return console.log(e)})),s(u),g(!1)}(t)}},"Save changes"),c.a.createElement("button",{className:"button cancel is-rounded",onClick:function(e){return function(e){e.preventDefault(),g(!1)}(e)}},"Cancel changes")))},M=function(e){var t=c.a.createElement(A.a,{icon:R.d}),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1];return Object(n.useEffect)((function(){!function(t){var a=[];e.itemsSaved&&t.map((function(e,t){p.a.get("/api/items/".concat(e)).then((function(e){(a=Object(f.a)(a)).push(e.data),s(a)})).catch((function(e){return console.log("error",e)}))}))}(e.itemsSaved)}),[e.itemsSaved]),console.log(r),r===[]?c.a.createElement("div",null,"Loading"):c.a.createElement("div",{id:"list-saved-items",className:"element"},c.a.createElement("h3",null,"Saved items"),c.a.createElement("ul",null,r.map((function(a,n){return c.a.createElement("div",{className:"saved-item",key:n},c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(){return function(t){var a=Object(f.a)(r).filter((function(e){return e.listingId!==t}));s(a);var n=[];a.map((function(e){(n=Object(f.a)(n)).push(e.listingId)})),p.a.put("/api/lists/".concat(e.userId,"/").concat(e.listId),{itemsSaved:n}).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(a.listingId)}},t),c.a.createElement("div",null,c.a.createElement("img",{className:"saved-item",src:a.imgsrc}),c.a.createElement("div",{className:"saved-item-detail"},c.a.createElement("a",{href:"https://www.etsy.com/listing/".concat(a.listingId.split("-")[1]),target:"_blank",rel:"noopener noreferrer",className:"truncate"},a.productName),c.a.createElement("p",null,a.currencyCode,": ",a.price))))}))))},T=function(e){var t=c.a.createElement(A.a,{icon:R.d}),a=c.a.createElement(A.a,{icon:R.b}),l=c.a.createElement(A.a,{icon:R.c}),r={note:"",url:""},s=Object(n.useState)(),i=Object(o.a)(s,2),m=i[0],u=i[1],E=Object(n.useState)(!0),v=Object(o.a)(E,2),h=v[0],b=v[1],g=Object(n.useState)(r),N=Object(o.a)(g,2),y=N[0],k=N[1],C=Object(n.useState)([]),S=Object(o.a)(C,2),I=S[0],w=S[1];console.log(e.customItem);function x(){b(!h)}var D=function(e){k(Object(j.a)({},y,Object(O.a)({},e.target.name,e.target.value)))};var F=function(e){if(void 0===e)return w([!0]);var t=e.map((function(e,t){return!0}));w(t)},_=function(e,t){var a=Object(f.a)(m);a[t]=Object(j.a)({},a[t],Object(O.a)({},e.target.name,e.target.value)),u(a)};return Object(n.useEffect)((function(){u(e.customItem),F(e.customItem)}),[e]),console.log(I),void 0===m||m===[]||I===[]?c.a.createElement("div",null,"Loading"):(console.log("working"),c.a.createElement("div",{id:"list-name",className:"element"},c.a.createElement("h3",null,c.a.createElement("span",{className:"edit-link interactive-icon clickable",onClick:x},l),"Add your own ideas"),c.a.createElement("div",{className:"".concat(h?"hide":"")},c.a.createElement("div",null,c.a.createElement("div",{className:"control has-static-text field"},c.a.createElement("input",{className:"input",type:"text",name:"note",onChange:D,title:"Note",value:y.note,placeholder:"Describe your gift"}),c.a.createElement("span",{className:"static-text"},"Item")),c.a.createElement("div",{className:"control has-static-text field"},c.a.createElement("input",{className:"input",type:"text",name:"url",onChange:D,title:"url",value:y.url,placeholder:"Add a link"}),c.a.createElement("span",{className:"static-text"},"URL")),c.a.createElement("button",{className:"button is-rounded",onClick:function(t){t.preventDefault(),p.a.post("/api/lists/".concat(e.userId,"/").concat(e.listId,"/customItems"),y,{headers:{Authorization:"Bearer ".concat(d.getToken())}}).then((function(e){b(!h),u(e.data.customItem),F(e.data.customItem),k(r)})).catch((function(e){return console.log(e)}))}},"Save"),c.a.createElement("button",{className:"button cancel is-rounded",onClick:x},"Cancel"))),m.map((function(n,l){return c.a.createElement("div",{key:l},c.a.createElement("div",{className:"".concat(I[l]?"":"hide")},c.a.createElement("div",{className:"custom-item"},c.a.createElement("div",{className:"custom-icons"},c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(){return function(e){console.log("test");var t=Object(f.a)(I);t[e]=!t[e],w(t)}(l)}},a),c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(){return t=n._id,void p.a.delete("/api/lists/".concat(e.userId,"/").concat(e.listId,"/customItems/").concat(t)).then((function(e){u(e.data.customItem),F(e.data.customItem)})).catch((function(e){return console.log(e)}));var t}},t)),c.a.createElement("div",{className:"custom-note"},c.a.createElement("p",{className:"custom-label"},n.note),c.a.createElement("a",{href:"https://".concat(n.url),target:"_blank",rel:"noopener noreferrer"},n.url)))),c.a.createElement("div",{className:"".concat(I[l]?"hide":"")},c.a.createElement("div",null,c.a.createElement("div",{className:"field"},c.a.createElement("input",{className:"input",type:"text",name:"note",defaultValue:m[l].note,onChange:function(e){return _(e,l)}}),c.a.createElement("input",{className:"input",type:"text",name:"url",onChange:function(e){return _(e,l)},title:"url",defaultValue:n.url})),c.a.createElement("button",{className:"button is-rounded",onClick:function(){return function(t,a){p.a.put("/api/lists/".concat(e.userId,"/").concat(e.listId,"/customItems/").concat(t),m[a]).then((function(e){u(e.data.customItem),F(e.data.customItem)}))}(n._id,l)}},"Save"))))}))))},B=a(62),G=a.n(B),U=function(e){function t(){return Object(m.a)(this,t),Object(y.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(G.a,{type:"Oval",color:"#358270",height:100,width:100,timeout:3e3})}}]),t}(c.a.Component),V=function(e){var t=c.a.createElement(A.a,{icon:R.c}),a=c.a.createElement(A.a,{icon:R.a}),l=Object(n.useState)({}),r=Object(o.a)(l,2),s=r[0],i=r[1],m=Object(n.useState)([]),u=Object(o.a)(m,2),E=(u[0],u[1]),v=Object(n.useState)([]),h=Object(o.a)(v,2),b=h[0],g=h[1],N=Object(n.useState)([]),O=Object(o.a)(N,2),j=O[0],y=O[1],k=Object(n.useState)([]),C=Object(o.a)(k,2),S=C[0],I=C[1];function w(e){p.a.get("/api/etsy/".concat(e)).then((function(e){I(e.data.data),x(e.data.data)})).catch((function(e){return E(e)}))}console.log(e);var x=function(e){var t=e.map((function(e,t){return e.listing_id})),a=[];t.forEach((function(e,t){p.a.get("/api/image/".concat(e)).then((function(e){(a=Object(f.a)(a))[t]=e.data.image,g(a)}))}))};return Object(n.useEffect)((function(){i(e),w(e.subcategory[0][0].value),y(e.subcategory[0])}),[e]),s==={}||b.length!==S.length?c.a.createElement("div",{className:"has-text-centered"},c.a.createElement("div",{className:"loader-margin"},c.a.createElement(U,null))):c.a.createElement("div",{id:"list-products",className:"element"},c.a.createElement("div",{className:"container"},c.a.createElement("h3",null,"Your categories"),c.a.createElement("ul",{className:"filter-option"},j.map((function(e,t){return c.a.createElement("li",{className:"clickable truncate",key:t,onClick:function(){return w(e.value)}},e.name)})))),c.a.createElement("div",{className:"container"},c.a.createElement("h3",null,"Suggested gifts"),c.a.createElement("div",{className:"columns is-multiline suggested-gifts"},S.map((function(n,l){return c.a.createElement("div",{className:"column is-one-third",key:l},c.a.createElement("div",{className:"card"},c.a.createElement("span",{className:"interactive-icon clickable",onClick:function(t){return function(t,a,n,c){var l={src:n,id:n+"-"+a.listing_id,user_id:e.userId,list_id:e.listId,imgsrc:c,productName:a.title,listingId:n+"-"+a.listing_id,price:a.price,currencyCode:a.currency_code};g(""),t.preventDefault(),p.a.post("/api/items/",l,{headers:{Authorization:"Bearer ".concat(d.getToken())}}).then((function(){e.refreshFunction(),w(j[0])})).catch((function(e){E(e.response)}))}(t,n,"etsy",b[l])}},t),c.a.createElement("span",{className:"background-icon interactive-icon"},a),c.a.createElement("div",{className:"card-image"},c.a.createElement("figure",{className:"image is-4by3"},c.a.createElement("img",{src:b[l],alt:"product"})),c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"truncate-card"},n.title),c.a.createElement("footer",{className:"card-footer"},c.a.createElement("br",null),n.currency_code,"  ",n.price)))))})))))},W=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),l=a[0],r=a[1],s=d.getUserId(),i=e.match.params.listId,m=function(){console.log("456"),p.a.get("/api/lists/".concat(s,"/").concat(i)).then((function(e){r(e.data),console.log("123")}))};return Object(n.useEffect)(m,[]),c.a.createElement("div",{className:"page"},c.a.createElement(S,null),c.a.createElement("section",{className:"section columns"},c.a.createElement("div",{className:"column "},c.a.createElement("div",{className:"container"},c.a.createElement(Y,{listName:l.listName,giftRecipient:l.giftRecipient,userId:s,listId:i}),c.a.createElement(z,{eventName:l.eventName,eventDate:l.eventDate,eventReminder:l.eventReminder,userId:s,listId:i})),l.subcategory&&c.a.createElement("div",null,c.a.createElement(V,{subcategory:l.subcategory,itemsSaved:l.itemsSaved,userId:s,listId:i,refreshFunction:m}))),c.a.createElement("div",{className:"column "},c.a.createElement("div",{className:"container"},c.a.createElement(M,{itemsSaved:l.itemsSaved,userId:s,listId:i})),c.a.createElement("div",{className:"container"},c.a.createElement(T,{customItem:l.customItem,userId:s,listId:i})))))},J=a(44),P=a(63),q=Object(P.a)(),H={user:"",listName:"",giftRecipient:"",eventName:"",eventDate:"",eventReminder:!1,budget:"",subcategory:""};var $=function(e){Object(n.useEffect)((function(){p.a.get("/api/categories").then((function(e){return function(e){var t=e.map((function(e){return{value:e.name,label:e.short_name,subcategories:e.subcategories}}));b(t)}(e.data)})).catch((function(e){return console.log(e)}))}),[]);var t=d.getUserId(),a=Object(n.useState)(H),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)({}),m=Object(o.a)(i,2),u=m[0],E=m[1],v=Object(n.useState)([]),f=Object(o.a)(v,2),h=f[0],b=f[1],g=Object(n.useState)([]),N=Object(o.a)(g,2),y=N[0],k=N[1],C=Object(n.useState)([]),w=Object(o.a)(C,2),x=w[0],D=w[1],F=function(e){e.preventDefault(),s(Object(j.a)({},r,Object(O.a)({},e.target.name,e.target.value))),E(Object(j.a)({},u,Object(O.a)({},e.target.name,"")))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,null),c.a.createElement("section",{className:""},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Create a list"),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column is-half"},c.a.createElement("form",{className:"form",onSubmit:function(a){a.preventDefault(),0===x.length?(console.log("im empty"),r.subcategory=[[{name:"Custom",value:"everything_else/custom"}]]):(console.log("im no empty"),r.subcategory=[x]),p.a.post("/api/lists/".concat(t),r,{headers:{Authorization:"Bearer ".concat(d.getToken())}}).then((function(a){return e.history.push("/lists/".concat(t,"/").concat(a.data._id))})).catch((function(e){E(e.response.data.errors)}))}},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"listName",className:"label"},"Give your list a name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:F,type:"text",className:"input",name:"listName"})),u.listName&&c.a.createElement("small",{className:"help is-danger"},u.listName)),c.a.createElement("h3",null,"Who are you saving gifts for?"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"giftRecipient",className:"label"},"Enter a name, or even yourself!"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:F,type:"text",className:"input",name:"giftRecipient"})),u.giftRecipient&&c.a.createElement("small",{className:"help is-danger"},u.giftRecipient)),c.a.createElement("h3",null,"Is it for a special event?"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"eventName",className:"label"},"Event name ",c.a.createElement("span",{className:"optional"},"optional")),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:F,type:"text",className:"input",name:"eventName"})),u.eventName&&c.a.createElement("small",{className:"help is-danger"},u.eventName)),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"eventDate",className:"label"},"Event date ",c.a.createElement("span",{className:"optional"},"optional")),c.a.createElement("div",{className:"control"},c.a.createElement("input",{onChange:F,type:"date",className:"input",name:"eventDate"})),u.eventDate&&c.a.createElement("small",{className:"help is-danger"},u.eventDate)),c.a.createElement("h3",null,"Would you like personalised suggestions?"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"subcategory",className:"label"},"Select a category ",c.a.createElement("span",{className:"optional"},"optional")),c.a.createElement("div",{className:"control select-input"},c.a.createElement(J.a,{options:h,onChange:function(e){var t=h.find((function(t){return t.value===e.value})).subcategories.map((function(e){return{value:e.category_name,label:e.name}}));k(t)}}),c.a.createElement(J.a,{closeMenuOnSelect:!1,components:q,isMulti:!0,options:y,onChange:function(e){if(null===e)return null;var t=e.map((function(e){return{value:e.value,name:e.label}}));D(t)}})),u.subcategory&&c.a.createElement("small",{className:"help is-danger"},u.subcategory)),c.a.createElement("button",{className:"button is-rounded"},"Create list"))),c.a.createElement("div",{className:"column is-half"},c.a.createElement(I,null))))))},K=function(e){return d.isAuthorized()?c.a.createElement(i.b,e):c.a.createElement(i.a,{to:"/login"})};var Q=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(s.a,null,c.a.createElement(v,null),c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/",component:N}),c.a.createElement(i.b,{exact:!0,path:"/lists/create",component:$}),c.a.createElement(i.b,{exact:!0,path:"/register",component:w}),c.a.createElement(i.b,{exact:!0,path:"/login",component:x}),c.a.createElement(K,{exact:!0,path:"/lists/:userId",component:L}),c.a.createElement(K,{exact:!0,path:"/lists/:userId/:listId",component:W}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t,a){e.exports=a(120)},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.73171170.chunk.js.map